import{R as i,j as e,c as t,a as v,B as c,L as N,t as w,r as k}from"./index-jJ-r5mz2.js";import{S as M}from"./separator-CUn7s6rW.js";import{L as C,D as u,e as x,A as S,m as b,n as y,f as p,g as D,h as m,M as T,i as r,v as h}from"./avatar-CVUMpbYi.js";import{u as I,c as z,d as E,e as A}from"./search-context-Dy6rVJYC.js";import{c as f}from"./createReactComponent-DA_aFz5i.js";/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var l=f("outline","check","IconCheck",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var L=f("outline","search","IconSearch",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]]);const R=({className:s,fixed:a,children:n,...o})=>{const[j,g]=i.useState(0);return i.useEffect(()=>{const d=()=>{g(document.body.scrollTop||document.documentElement.scrollTop)};return document.addEventListener("scroll",d,{passive:!0}),()=>document.removeEventListener("scroll",d)},[]),e.jsxs("header",{className:t("bg-background flex h-16 items-center gap-3 p-4 sm:gap-4",a&&"header-fixed peer/header fixed z-50 w-[inherit] rounded-md",j>10&&a?"shadow-sm":"shadow-none",s),...o,children:[e.jsx(C,{variant:"outline",className:"scale-125 sm:scale-100"}),e.jsx(M,{orientation:"vertical",className:"h-6"}),n]})};R.displayName="Header";const H=({fixed:s,className:a,...n})=>e.jsx("main",{className:t("peer-[.header-fixed]/header:mt-16","px-4 py-6",s&&"fixed-main flex grow flex-col overflow-hidden",a),...n});H.displayName="Main";function F(){const{user:s}=I({from:"/_authenticated"}),{logout:a}=v();return e.jsxs(u,{modal:!1,children:[e.jsx(x,{asChild:!0,children:e.jsx(c,{variant:"ghost",className:"relative h-8 w-8 rounded-full",children:e.jsxs(S,{className:"h-8 w-8",children:[e.jsx(b,{src:"/avatars/shadcn.jpg",alt:"@shadcn"}),e.jsx(y,{children:s.username.slice(0,2).toUpperCase()})]})})}),e.jsxs(p,{className:"w-56",align:"end",forceMount:!0,children:[e.jsx(D,{className:"font-normal",children:e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("p",{className:"text-sm leading-none font-medium",children:s.username}),e.jsx("p",{className:"text-muted-foreground text-xs leading-none",children:s.is_active?"已激活":"未激活"}),s.roles?.length&&e.jsxs("p",{className:"text-muted-foreground text-xs leading-none",children:["角色：",s.roles?.map(n=>n.name).join(", ")]})]})}),e.jsx(m,{}),e.jsx(T,{children:e.jsx(r,{asChild:!0,children:e.jsxs(N,{to:"/settings",children:["设置",e.jsx(h,{children:"⌘S"})]})})}),e.jsx(m,{}),e.jsxs(r,{onClick:()=>{a()},children:["退出登录",e.jsx(h,{children:"⇧⌘Q"})]})]})]})}function G({className:s="",placeholder:a="搜索"}){const{setOpen:n}=z();return e.jsxs(c,{variant:"outline",className:t("bg-muted/25 text-muted-foreground hover:bg-muted/50 relative h-8 w-full flex-1 justify-start rounded-md text-sm font-normal shadow-none sm:pr-12 md:w-40 md:flex-none lg:w-56 xl:w-64",s),onClick:()=>n(!0),children:[e.jsx(L,{"aria-hidden":"true",className:"absolute top-1/2 left-1.5 -translate-y-1/2"}),e.jsx("span",{className:"ml-3",children:a}),e.jsxs("kbd",{className:"bg-muted pointer-events-none absolute top-[0.3rem] right-[0.3rem] hidden h-5 items-center gap-1 rounded border px-1.5 font-mono text-[10px] font-medium opacity-100 select-none sm:flex",children:[e.jsx("span",{className:"text-xs",children:"⌘"}),"K"]})]})}function K(){const{theme:s,setTheme:a}=w();return k.useEffect(()=>{const n=s==="dark"?"#020817":"#fff",o=document.querySelector("meta[name='theme-color']");o&&o.setAttribute("content",n)},[s]),e.jsxs(u,{modal:!1,children:[e.jsx(x,{asChild:!0,children:e.jsxs(c,{variant:"ghost",size:"icon",className:"scale-95 rounded-full",children:[e.jsx(E,{className:"size-[1.2rem] scale-100 rotate-0 transition-all dark:scale-0 dark:-rotate-90"}),e.jsx(A,{className:"absolute size-[1.2rem] scale-0 rotate-90 transition-all dark:scale-100 dark:rotate-0"}),e.jsx("span",{className:"sr-only",children:"切换主题"})]})}),e.jsxs(p,{align:"end",children:[e.jsxs(r,{onClick:()=>a("light"),children:["浅色"," ",e.jsx(l,{size:14,className:t("ml-auto",s!=="light"&&"hidden")})]}),e.jsxs(r,{onClick:()=>a("dark"),children:["深色",e.jsx(l,{size:14,className:t("ml-auto",s!=="dark"&&"hidden")})]}),e.jsxs(r,{onClick:()=>a("system"),children:["系统",e.jsx(l,{size:14,className:t("ml-auto",s!=="system"&&"hidden")})]})]})]})}export{R as H,H as M,F as P,G as S,K as T};
