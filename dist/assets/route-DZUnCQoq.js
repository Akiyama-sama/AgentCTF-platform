import{r as c,j as e,u as Z,L as S,a as ee,R as se,c as te,O as ne}from"./index-jJ-r5mz2.js";import{u as ae,s as z,S as re}from"./search-context-Dy6rVJYC.js";import{u as f,S as oe,a as ie,b as M,c as m,d as j,D as R,e as k,f as A,g as O,h as q,i as V,j as le,k as ce,l as de,A as F,m as G,n as H,o as pe,p as ue,q as xe,r as he,s as fe,t as me}from"./avatar-CVUMpbYi.js";import{u as je}from"./useLocation-BIQZI5yl.js";import{c as _,u as ge,a as be,b as ve,d as Ce,P as Ne,e as we}from"./index-DSZ_lwlW.js";import{P as D}from"./index-DC18PyZR.js";import{B as ye}from"./badge-B4wrcvZ9.js";import{C as W}from"./chevron-right-D5wS3klw.js";import"./command-BAzBGs10.js";import"./index-ZV2pxxac.js";import"./search-C8RdyhLB.js";import"./createReactComponent-DA_aFz5i.js";import"./index-Bdu6MxlU.js";import"./index-CT9bT4NP.js";import"./index-DcoZsgCb.js";/*! js-cookie v3.0.5 | MIT */function b(s){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)s[a]=n[a]}return s}var Se={read:function(s){return s[0]==='"'&&(s=s.slice(1,-1)),s.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(s){return encodeURIComponent(s).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function y(s,t){function n(r,i,o){if(!(typeof document>"u")){o=b({},t,o),typeof o.expires=="number"&&(o.expires=new Date(Date.now()+o.expires*864e5)),o.expires&&(o.expires=o.expires.toUTCString()),r=encodeURIComponent(r).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var d="";for(var l in o)o[l]&&(d+="; "+l,o[l]!==!0&&(d+="="+o[l].split(";")[0]));return document.cookie=r+"="+s.write(i,r)+d}}function a(r){if(!(typeof document>"u"||arguments.length&&!r)){for(var i=document.cookie?document.cookie.split("; "):[],o={},d=0;d<i.length;d++){var l=i[d].split("="),u=l.slice(1).join("=");try{var x=decodeURIComponent(l[0]);if(o[x]=s.read(u,x),r===x)break}catch{}}return r?o[r]:o}}return Object.create({set:n,get:a,remove:function(r,i){n(r,"",b({},i,{expires:-1}))},withAttributes:function(r){return y(this.converter,b({},this.attributes,r))},withConverter:function(r){return y(b({},this.converter,r),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(s)}})}var Me=y(Se,{path:"/"});/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],J=_("chevrons-up-down",Re);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]],Ae=_("command",ke);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],_e=_("log-out",Oe);var C="Collapsible",[De,cs]=be(C),[Pe,P]=De(C),K=c.forwardRef((s,t)=>{const{__scopeCollapsible:n,open:a,defaultOpen:r,disabled:i,onOpenChange:o,...d}=s,[l,u]=ge({prop:a,defaultProp:r??!1,onChange:o,caller:C});return e.jsx(Pe,{scope:n,disabled:i,contentId:ve(),open:l,onOpenToggle:c.useCallback(()=>u(x=>!x),[u]),children:e.jsx(D.div,{"data-state":E(l),"data-disabled":i?"":void 0,...d,ref:t})})});K.displayName=C;var Q="CollapsibleTrigger",X=c.forwardRef((s,t)=>{const{__scopeCollapsible:n,...a}=s,r=P(Q,n);return e.jsx(D.button,{type:"button","aria-controls":r.contentId,"aria-expanded":r.open||!1,"data-state":E(r.open),"data-disabled":r.disabled?"":void 0,disabled:r.disabled,...a,ref:t,onClick:Ce(s.onClick,r.onOpenToggle)})});X.displayName=Q;var L="CollapsibleContent",Y=c.forwardRef((s,t)=>{const{forceMount:n,...a}=s,r=P(L,s.__scopeCollapsible);return e.jsx(Ne,{present:n||r.open,children:({present:i})=>e.jsx(Le,{...a,ref:t,present:i})})});Y.displayName=L;var Le=c.forwardRef((s,t)=>{const{__scopeCollapsible:n,present:a,children:r,...i}=s,o=P(L,n),[d,l]=c.useState(a),u=c.useRef(null),x=Z(t,u),N=c.useRef(0),I=N.current,$=c.useRef(0),B=$.current,w=o.open||d,T=c.useRef(w),g=c.useRef(void 0);return c.useEffect(()=>{const p=requestAnimationFrame(()=>T.current=!1);return()=>cancelAnimationFrame(p)},[]),we(()=>{const p=u.current;if(p){g.current=g.current||{transitionDuration:p.style.transitionDuration,animationName:p.style.animationName},p.style.transitionDuration="0s",p.style.animationName="none";const U=p.getBoundingClientRect();N.current=U.height,$.current=U.width,T.current||(p.style.transitionDuration=g.current.transitionDuration,p.style.animationName=g.current.animationName),l(a)}},[o.open,a]),e.jsx(D.div,{"data-state":E(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!w,...i,ref:x,style:{"--radix-collapsible-content-height":I?`${I}px`:void 0,"--radix-collapsible-content-width":B?`${B}px`:void 0,...s.style},children:w&&r})});function E(s){return s?"open":"closed"}var Ee=K;function Ie({...s}){return e.jsx(Ee,{"data-slot":"collapsible",...s})}function $e({...s}){return e.jsx(X,{"data-slot":"collapsible-trigger",...s})}function Be({...s}){return e.jsx(Y,{"data-slot":"collapsible-content",...s})}function Te({title:s,items:t}){const{state:n,isMobile:a}=f(),r=je({select:i=>i.href});return e.jsxs(oe,{children:[e.jsx(ie,{children:s}),e.jsx(M,{children:t.map(i=>{const o=`${i.title}-${i.url}`;return i.items?n==="collapsed"&&!a?e.jsx(Fe,{item:i,href:r},o):e.jsx(ze,{item:i,href:r},o):e.jsx(Ue,{item:i,href:r},o)})})]})}const v=({children:s})=>e.jsx(ye,{className:"rounded-full px-1 py-0 text-xs",children:s}),Ue=({item:s,href:t})=>{const{setOpenMobile:n}=f();return e.jsx(m,{children:e.jsx(j,{asChild:!0,isActive:h(t,s),tooltip:s.title,children:e.jsxs(S,{to:s.url,onClick:()=>n(!1),children:[s.icon&&e.jsx(s.icon,{}),e.jsx("span",{children:s.title}),s.badge&&e.jsx(v,{children:s.badge})]})})})},ze=({item:s,href:t})=>{const{setOpenMobile:n}=f();return e.jsx(Ie,{asChild:!0,defaultOpen:h(t,s,!0),className:"group/collapsible",children:e.jsxs(m,{children:[e.jsx($e,{asChild:!0,children:e.jsxs(j,{tooltip:s.title,children:[s.icon&&e.jsx(s.icon,{}),e.jsx("span",{children:s.title}),s.badge&&e.jsx(v,{children:s.badge}),e.jsx(W,{className:"ml-auto transition-transform duration-200 group-data-[state=open]/collapsible:rotate-90"})]})}),e.jsx(Be,{className:"CollapsibleContent",children:e.jsx(le,{children:s.items.map(a=>e.jsx(ce,{children:e.jsx(de,{asChild:!0,isActive:h(t,a),children:e.jsxs(S,{to:a.url,onClick:()=>n(!1),children:[a.icon&&e.jsx(a.icon,{}),e.jsx("span",{children:a.title}),a.badge&&e.jsx(v,{children:a.badge})]})})},a.title))})})]})})},Fe=({item:s,href:t})=>e.jsx(m,{children:e.jsxs(R,{children:[e.jsx(k,{asChild:!0,children:e.jsxs(j,{tooltip:s.title,isActive:h(t,s),children:[s.icon&&e.jsx(s.icon,{}),e.jsx("span",{children:s.title}),s.badge&&e.jsx(v,{children:s.badge}),e.jsx(W,{className:"ml-auto transition-transform duration-200 group-data-[state=open]/collapsible:rotate-90"})]})}),e.jsxs(A,{side:"right",align:"start",sideOffset:4,children:[e.jsxs(O,{children:[s.title," ",s.badge?`(${s.badge})`:""]}),e.jsx(q,{}),s.items.map(n=>e.jsx(V,{asChild:!0,children:e.jsxs(S,{to:n.url,className:`${h(t,n)?"bg-secondary":""}`,children:[n.icon&&e.jsx(n.icon,{}),e.jsx("span",{className:"max-w-52 text-wrap",children:n.title}),n.badge&&e.jsx("span",{className:"ml-auto text-xs",children:n.badge})]})},`${n.title}-${n.url}`))]})]})});function h(s,t,n=!1){return s===t.url||s.split("?")[0]===t.url||!!t?.items?.filter(a=>a.url===s).length||n&&s.split("/")[1]!==""&&s.split("/")[1]===t?.url?.split("/")[1]}function Ge({user:s}){const{isMobile:t}=f(),n="/avatars/shadcn.jpg",{logout:a}=ee();return e.jsx(M,{children:e.jsx(m,{children:e.jsxs(R,{children:[e.jsx(k,{asChild:!0,children:e.jsxs(j,{size:"lg",className:"data-[state=open]:bg-sidebar-accent data-[state=open]:text-sidebar-accent-foreground",children:[e.jsxs(F,{className:"h-8 w-8 rounded-lg",children:[e.jsx(G,{src:n,alt:s.username}),e.jsx(H,{className:"rounded-lg",children:s.username.slice(0,2).toUpperCase()})]}),e.jsxs("div",{className:"grid flex-1 text-left text-sm leading-tight",children:[e.jsx("span",{className:"truncate font-semibold",children:s.username}),e.jsxs("span",{className:"truncate text-xs",children:["激活状态：",s.is_active?"已激活":"未激活"]})]}),e.jsx(J,{className:"ml-auto size-4"})]})}),e.jsxs(A,{className:"w-(--radix-dropdown-menu-trigger-width) min-w-56 rounded-lg",side:t?"bottom":"right",align:"end",sideOffset:4,children:[e.jsx(O,{className:"p-0 font-normal",children:e.jsxs("div",{className:"flex items-center gap-2 px-1 py-1.5 text-left text-sm",children:[e.jsxs(F,{className:"h-8 w-8 rounded-lg",children:[e.jsx(G,{src:n,alt:s.username}),e.jsx(H,{className:"rounded-lg",children:s.username.slice(0,2).toUpperCase()})]}),e.jsxs("div",{className:"grid flex-1 text-left text-sm leading-tight",children:[e.jsx("span",{className:"truncate font-semibold",children:s.username}),e.jsxs("span",{className:"truncate text-xs",children:["激活状态：",s.is_active?"已激活":"未激活"]}),e.jsxs("span",{className:"truncate text-xs",children:["角色：",s.roles?.map(r=>r.name).join(", ")]})]})]})}),e.jsx(q,{}),e.jsxs(V,{onClick:()=>{a()},children:[e.jsx(_e,{}),"退出登录"]})]})]})})})}function He(){const{isMobile:s}=f();return e.jsx(M,{children:e.jsx(m,{children:e.jsxs(R,{children:[e.jsx(k,{asChild:!0,children:e.jsxs(j,{size:"lg",className:"data-[state=open]:bg-sidebar-accent data-[state=open]:text-sidebar-accent-foreground",children:[e.jsx("div",{className:"bg-sidebar-primary text-sidebar-primary-foreground flex aspect-square size-8 items-center justify-center rounded-lg",children:e.jsx(Ae,{className:"size-4"})}),e.jsxs("div",{className:"grid flex-1 text-left text-sm leading-tight",children:[e.jsx("span",{className:"truncate font-semibold",children:"AgentWar攻防平台"}),e.jsx("span",{className:"truncate text-xs",children:"V1.0.0"})]}),e.jsx(J,{className:"ml-auto"})]})}),e.jsx(A,{className:"w-(--radix-dropdown-menu-trigger-width) min-w-56 rounded-lg",align:"start",side:s?"bottom":"right",sideOffset:4,children:e.jsx(O,{className:"text-muted-foreground text-xs",children:"版本信息"})})]})})})}function qe({...s}){const{user:t}=ae({from:"/_authenticated"}),n=se.useMemo(()=>t.roles?.[0]?.id===1?z.navGroups.filter(a=>a.title!=="用户管理"):z.navGroups,[t]);return e.jsxs(pe,{collapsible:"icon",variant:"floating",...s,children:[e.jsx(ue,{children:e.jsx(He,{})}),e.jsx(xe,{children:n.map(a=>e.jsx(Te,{...a},a.title))}),e.jsx(he,{children:e.jsx(Ge,{user:t})}),e.jsx(fe,{})]})}const Ve=()=>e.jsx("a",{className:"bg-primary text-primary-foreground hover:bg-primary/90 focus-visible:ring-ring fixed left-44 z-999 -translate-y-52 px-4 py-2 text-sm font-medium whitespace-nowrap opacity-95 shadow-sm transition focus:translate-y-3 focus:transform focus-visible:ring-1",href:"#content",children:"Skip to Main"});function We({children:s}){const t=Me.get("sidebar_state")!=="false";return e.jsx(re,{children:e.jsxs(me,{defaultOpen:t,children:[e.jsx(Ve,{}),e.jsx(qe,{}),e.jsx("div",{id:"content",className:te("ml-auto w-full max-w-full","peer-data-[state=collapsed]:w-[calc(100%-var(--sidebar-width-icon)-1rem)]","peer-data-[state=expanded]:w-[calc(100%-var(--sidebar-width))]","sm:transition-[width] sm:duration-200 sm:ease-linear","flex h-svh flex-col","group-data-[scroll-locked=1]/body:h-full","has-[main.fixed-main]:group-data-[scroll-locked=1]/body:h-svh"),children:s||e.jsx(ne,{})})]})})}const ds=We;export{ds as component};
